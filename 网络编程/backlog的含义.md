**该参数指定的是完成队列的长度**。

在TCP建立连接阶段，内核维护着两个队列：

- **未完成队列** 这是客户端发送SYN过来，服务器回应SYN+ACK之后，服务器当前处于SYN_RECV状态，此时的连接在未完成队列中。
- **完成队列** 客户端回应ACK之后，两边都处于ESTABLISHED状态，此时连接从未完成队列移到完成队列中，服务器调用accept，就从完成队列移除并返回给程序。

假如指定了一个很小的backlog，比如1，那么完成队列很容易就满，满了以后客户端连接进来会怎么样呢？从上面可知，客户端connect还是成功返回，但是服务器这个连接进不了完成队列，一段时间后被内核释放了，服务器就没有办法通过accept得到连接。

这时就出现这样的现象：

- 客户端连接成功并得到socket fd，但服务器没有相应的fd。
- 客户端执行read，服务器停止了，客户端的read没有办法返回0，还是一直阻塞着。

所以，在编写服务器代码时要注意：

- backlog要指定合适的值，Linux一般是128，通常用这个就可以了。
- 尽早accept新的连接，防止完成队列满了，新连接没办法被accept。

# 参考

https://blog.csdn.net/aitangyong/article/details/49661907

