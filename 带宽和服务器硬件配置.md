# 前言

本文档描述摄像头监控需求中带宽和服务器硬件配置要求。基于下图架构图做相关说明：

![](/Users/rocky/Work/project/document/images/摄像头监控架构.png)

# 一、服务器硬件配置

根据当前业务需求，在以下几个前提条件下：

- 摄像头数量适中

- 要求同时在线观看摄像头监控的人数不多
- 采用按需查看监控（拉流）的方案（不查看不起采流进程，不推送摄像流）

对服务器配置要求为：

~~~
服务器数量：1台（采流服务程序 + 流媒体Nginx服务 + MySQL服务）

服务器（计算型）硬件配置：
核数：8核
内存：16G
主频：高
硬盘容量：基本容量（现无存储录像的需求）
~~~

# 二、带宽

从网络交互角度摄像头监控架构图如下：

![服务器架构-网络角度](/Users/rocky/Work/project/document/images/服务器架构-网络角度.png)

## 2.1. 内网带宽

影响内网带宽计算的因素为：摄像头数量。

下图为大华IPC带宽计算工具界面：

![内网带宽计算](/Users/rocky/Work/project/document/images/内网带宽计算.png)

工具网址为：https://support.dahuatech.com/tools/onlineTools/32

关于参数说明：

- 分辨率

  影响视频画面的清晰度，1080P为高清画质。

- 编码类型

  常用H.264和H.265。登录摄像头后台，在视频选项一栏可以看到当前摄像头视频所选用的编码类型。

  > 新款的应该默认选择的是H.265。整体方案推荐使用H.264，采流后无需转码，减少CPU使用率。

- 推荐码率：

  视频码率就是数据传输时单位时间传送的数据位数。码率和视频质量成正比，同样的分辨率，码率越大，视频质量就越高，就越清晰；同时视频文件体积也和码率成正比，那么视频文件的体积也就越大，所需的带宽也就越大。这里按照推荐码率来计算带宽值。

**使用大华官方带宽计算工具，输入摄像头的数量，选择对应的参数计算出内网带宽。**

## 2.2. 公网带宽

影响公网带宽计算的因素为：**同时**在线观看的人数。

> 声明：这里的人并不是实体人的概念，在浏览器中打开一次查看摄像头监控画面算作是一人数。

内网带宽计算的是服务器的下行带宽，公网带宽计算的是服务器的上行带宽。

公网带宽计算公式如下：

~~~
公网带宽 = 码率*同时在线人数
~~~

公网带宽计算，选取参数如下：

- 分辨率：1080P
- 码率：2048Kbps

预估同时在线人数峰值为50人，计算带宽如下：

~~~
公网带宽 = (2048Kbps ÷ 1024) * 50 = 100Mbps
~~~

# 总结

关于带宽，主要考虑的还是公网带宽，也就是服务器的上行带宽；对于内网带宽，也就是服务器的下行带宽，对于云服务器平台来说，都会给得很足，比如说腾讯的计算型服务器，可以到G级别。





# 

