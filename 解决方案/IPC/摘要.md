过去非常流行的在网页中播放监控摄像头视频的方案之一，是通过FFmpeg将摄像头的RTSP流推至安装了[RTMP](https://www.yuanmasucai.com/tag/rtmp)模块的Nginx中，然后转成RTMP流让浏览器通过Flash播放，但是随着2020年Flash彻底退出历史舞台，浏览器播放监控视频的方式又少了一种。

目前摄像头直播的方案主要有通过有通过rtsp方式、国标协议、调用厂家sdk获取视频流等方式。大华sdk支持摄像头主动注册的方式对接服务器，通过这种方式，可以实现远程获取视频流并对摄像头进行控制，通过推流到流媒体服务器可以通过flv、wsflv、hls等主流流媒体协议在手机以及网页进行视频的实时查看与控制。

 感谢banmajio的文章对我的启发（https://blog.csdn.net/weixin_40777510/article/details/105840823），大华与海康通过sdk获取视频流进行推流直播的方法基本类似，唯一的区别是海康可以通过sdk获取到裸码流，而大华sdk只能获取到大华头封装的视频流，需要使用解码库等手段对获取到的视频流进行处理。

问问你们的项目负责人有没有集成大华的 dss 平台，如果有，平台上面有接口可以实现拉流，如果没有则需要自己解码转码。

通过调取大华摄像机SDK，获取的音视频码流，其格式为大华的私有格式。需通过大华的码流分析库StreamAnalyzer.dll将私有头和负载分离，从而提取出纯H264及音频帧数据。

# 参考文档

https://blog.csdn.net/weixin_40777510/article/details/105840823

https://www.i4k.xyz/article/zb95731/114282803

https://cloud.tencent.com/developer/article/1711409

# 拉流方式



# 推流方式

https://blog.csdn.net/weixin_40263855/article/details/87917484

现在很多项目都有视频实时播放的功能需求，例如监控，直播等，原始的摄像头采集的视频流协议一般都是**rtsp**协议，在旧版的浏览器中使用**FLASH**可以支撑其进行播放，但是现在各大主流浏览器都关闭了对**FLASH**的支持，这就需要我们把**rtsp**转为浏览器支持的**http**，业务体量很大的公司一般会把这种事情委托给专业的第三方公司去做，但很多公司在这方面没有那么大的业务量，往往只是播放一下监控录像之类的需求，则是搭建了自己的流媒体服务器来应对，现在比较主流的方式是使用**FFmpeg**进行转流，再使用**Nginx**进行转发，下面我们一起来看一下吧！（所需安装包请查看文末获取）

https://www.cxybb.com/article/Vincent_ZP/103614207

https://www.programminghunter.com/article/8683270803/

https://github.com/eguid/FFCH4J

rtsp://wowzaec2demo.streamlock.net/vod/mp4:BigBuckBunny_115k.mov

https://blog.csdn.net/defonds/article/details/8863717

https://gitee.com/lllyl2012/rtspDemo/tree/master

https://blog.51cto.com/daniusdk/2785345?xiangguantuijian&02

**nginx**-rtmp-**module**

https://github.com/arut/nginx-rtmp-module

**nginx**-**http**-**flv**-**module**

https://github.com/arut/nginx-rtmp-module

https://zhuanlan.zhihu.com/p/361246822

https://blog.csdn.net/qq_22633333/article/details/96288603#comments

https://www.jibing57.com/2020/08/01/advanced-configure-of-nginx-rtmp/

~~~
推流的基本格式为ffmpeg -i 视频文件 -vcodec 视频编码库 -acodec 音频编码库 -f flv rtmp://xx，application（如上述的 mylive）之后的参数为串流码（Stream Key），如前面所用到的6和7，用于 区分不同的直播流。
~~~

http://alanhou.org/nginx-rtmp-module/

https://blog.52itstyle.vip/archives/2254/

https://www.jianshu.com/p/74c2bba02990

http://www.ptbird.cn/nginx-rtmp-module-server.html

# Nginx配置

~~~
start ffmpeg -re -i "rtmp://192.168.1.26:1935/live" -vcodec libx264 -preset:v ultrafast -tune:v zerolatency -acodec copy -f flv "rtmp://192.168.1.26:1935/hls/live" -loglevel quiet
~~~

在Chrome、Firefox等高版本浏览器中实现低延迟、低成本播放海康和大华RTSP实时视频流的好方案。所谓好的技术实施方案，就是首先是要满足客户的需求，其次是尽量降低开发、实施及运营的总成本，再次是是良好的兼容性和可靠性，最后需尽量确保技术方案不能因为浏览器的升级而失效。

# 三种视频流浏览器播放解决方案

https://juejin.cn/post/6844903953126129671

[无插件web直播解决方案(不使用Flash) ，flv.js+ffmpeg+nginx-http-flv-module](https://segmentfault.com/a/1190000023949105)

无插件，低延迟，开源免费

https://github.com/Streamedian/html5_rtsp_player

# Install nasm on Mac OSX

https://macappstore.org/nasm/

# Installing ffmpeg with libx264 (h264) on MAC OS X

https://usunyu.com/note/2016/05/12/installing-ffmpeg-libx264-on-mac/

# linux ffmpeg Unknown encoder 'libx264'解决办法:安装第三方x264和mp3lame编码器

https://www.it399.com/blog/ffmpeg/201807011724

# mac安装FFMPEG

https://www.youtube.com/watch?v=zl4vo0dhLRk

https://wxzzz.com/425.html

http://bilibili.github.io/flv.js/demo/

# [前端Web浏览器基于H5如何实时播放监控视频画面（前言）之流程介绍](https://www.debugger.wiki/article/html/1590938287112795)

https://www.debugger.wiki/article/html/1590938287112795

