# 场景

订单超时关闭、员工二维码超时删除。

# 解决方案

## 方案一: 定时轮询

1. 时效性差；
2. 效率低

## 方案二: 被动取消

操作时检查是否失效。适不适合具体看使用场景。

## 方案三:延时消息

## 方案四:延时队列

jdk: DelayQueue

优点:效率高,任务触发时间延迟低。
缺点:(1)服务器重启后，数据全部消失，怕宕机
     (2)集群扩展相当麻烦
     (3)因为内存条件限制的原因，比如下单未付款的订单数太多，那么很容易就出现OOM异常
     (4)代码复杂度较高

## 方案五:时间轮

https://www.cnblogs.com/luozhiyun/p/12075326.html

https://spongecaptain.cool/post/widget/timingwheel/

https://juejin.cn/post/6844904110399946766

https://blog.acolyer.org/2015/11/23/hashed-and-hierarchical-timing-wheels/

Netty: HashedWheelTimer

Kafka: 层级时间轮TimingWheel

Zookeeper



